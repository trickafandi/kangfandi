(function($){$.fn.dropmenu=function(c){var d={openAnimation:"slide",closeAnimation:"slide",openClick:false,openSpeed:500,closeSpeed:700,closeDelay:500,onHide:function(){},onHidden:function(){},onShow:function(){},onShown:function(){}};var f=$.extend({},d,c);var g=this;var h=0;var j="";init();function init(){var b=g.find(":has(li,div) > a").append('<span class="arrow"></span>');$.each(b,function(i,a){if(b.eq(i).parent().is("li")){b.eq(i).next().addClass("submenu").parent().addClass("haschildren")}else{b.eq(i).parent().find("ul").show()}});if(f.openClick){g.find(".submenu").css("display","none");g.find(":has(li,div) > a").parent().bind("mouseleave",handleHover).bind("mouseenter",function(){window.clearInterval(j)});g.find("a span.arrow").bind("click",handleHover)}else{g.find(":has(li,div) > a").bind("mouseenter",handleHover).parent().bind("mouseleave",handleHover).bind("mouseenter",function(){window.clearInterval(j)})}}function handleHover(e){if(e.type=="mouseenter"||e.type=="click"){window.clearInterval(j);var a=$(e.target).parent().find(".submenu:not(:animated):not(.open)");if(a.html()==null){a=$(e.target).parent().next(".submenu:not(:animated):not(.open)")}if(a.html()!=null){f.onShow.call(a);closeAllMenus();a.prev().addClass("selected");a.css("z-index","90");a.stop().hide();openMenu(a)}}if(e.type=="mouseleave"||e.type=="mouseout"){a=$(e.target).parents(".submenu");if(a.length!=1){var a=$(e.target).parent().parent().find(".submenu");if(a.html()==null){var a=$(e.target).parent().find(".submenu");if(a.html()==null){var a=$(e.target).parent().parent().parent().find(".submenu")}}}if(a.html()!=null){if(f.closeDelay==0){a.parent().find("a").removeClass("selected");closeMenu(a)}else{window.clearInterval(j);j=setInterval(function(){window.clearInterval(j);closeMenu(a)},f.closeDelay)}}}}function openMenu(a){switch(f.openAnimation){case"slide":openSlideAnimation(a);break;case"fade":openFadeAnimation(a);break;default:openSizeAnimation(a);break}}function openSlideAnimation(a){a.addClass("open").slideDown(f.openSpeed,function(){f.onShown.call(this)})}function openFadeAnimation(a){a.addClass("open").fadeIn(f.openSpeed,function(){f.onShown.call(this)})}function openSizeAnimation(a){a.addClass("open").show(f.openSpeed,function(){f.onShown.call(this)})}function closeMenu(a){f.onHide.call(a);switch(f.closeAnimation){case"slide":closeSlideAnimation(a);break;case"fade":closeFadeAnimation(a);break;default:closeSizeAnimation(a);break}}function closeSlideAnimation(a){a.slideUp(f.closeSpeed,closeCallback)}function closeFadeAnimation(a){a.fadeOut(f.closeSpeed,function(){$(this).removeClass("open");$(this).prev().removeClass("selected")})}function closeSizeAnimation(a){a.hide(f.closeSpeed,function(){$(this).removeClass("open");$(this).prev().removeClass("selected")})}function closeAllMenus(){var b=g.find(".submenu.open");$.each(b,function(i,a){$(b[i]).css("z-index","1");closeMenu($(b[i]))})}function closeCallback(a){$(this).removeClass("open");if($(this).prev().attr("class")=="selected")f.onHidden.call(this);$(this).prev().removeClass("selected")}return this}})(jQuery);
